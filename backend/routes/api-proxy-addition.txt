// Add this route to backend/routes/api.js
// Place it at the END of the file, just BEFORE: module.exports = router;

/**
 * GET /api/fpl-proxy/*
 * Proxies FPL API requests for users whose carriers block CORS proxies
 * Only used as fallback when corsproxy.io fails
 */
router.get('/fpl-proxy/*', async (req, res) => {
    try {
        const axios = require('axios');
        const fplPath = req.params[0];
        const fplUrl = `https://fantasy.premierleague.com/api/${fplPath}`;

        console.log(`[Fallback] Proxying FPL request: ${fplUrl}`);

        const response = await axios.get(fplUrl);
        res.json(response.data);
    } catch (error) {
        console.error('FPL proxy error:', error.message);
        res.status(500).json({ error: 'FPL API error' });
    }
});
